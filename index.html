<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Subscriber Simulator</title>

<!-- Favicon (site icon) -->
<link rel="icon" href="https://www.youtube.com/s/desktop/fe2e5c60/img/favicon_144x144.png" type="image/png">

<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  button { padding: 14px 28px; font-size: 18px; margin-right: 10px; cursor: pointer; }
  #stats { margin-top: 15px; font-size: 18px; font-weight: bold; }
</style>
</head>
<body>

<h1>YouTube New Subscriber Simulator</h1>
<p>Rate: 5 notifications per second</p>

<button id="start">START</button>
<button id="stop">STOP</button>

<div id="stats">Total Subscribers: 0</div>

<script>
let intervalId = null;

// YouTube logo for notifications
const YOUTUBE_ICON = "https://www.youtube.com/s/desktop/fe2e5c60/img/favicon_144x144.png";

// Load saved subscriber count
let subscriberCount = parseInt(localStorage.getItem('subscriberCount')) || 0;
document.getElementById('stats').textContent = `Total Subscribers: ${subscriberCount}`;

// iOS-friendly: requestPermission inside click handler
function requestPermissionAndStart() {
  if (!("Notification" in window)) {
    alert("Notifications not supported.");
    return;
  }

  Notification.requestPermission().then(permission => {
    if (permission !== "granted") {
      alert("Notifications blocked! Enable notifications in Safari settings.");
      return;
    }

    if (intervalId) return;

    // 5 notifications per second â†’ every 200ms
    intervalId = setInterval(sendNotification, 200);
  });
}

// Send a new subscriber notification
function sendNotification() {
  subscriberCount++;
  localStorage.setItem('subscriberCount', subscriberCount);

  new Notification("ðŸ”” New Subscriber!", {
    body: `You got a new subscriber! Total: ${subscriberCount}`,
    icon: YOUTUBE_ICON
  });

  document.getElementById('stats').textContent = `Total Subscribers: ${subscriberCount}`;
}

// Start / Stop buttons
document.getElementById('start').onclick = requestPermissionAndStart;
document.getElementById('stop').onclick = () => {
  clearInterval(intervalId);
  intervalId = null;
};
</script>

</body>
</html>
